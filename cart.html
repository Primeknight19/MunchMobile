<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cart-style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <title>Cart</title>
</head>

<body>
    <!--main-->
    <div class="main">
        <span style="float:left"><h1 style="color: var(--whiteColor);">MunchTime</h1></span>
        <span style="float:right">
            <div class="profile">
                <a class="user" href="#" title="Profile">
                    <ion-icon name="person-outline"></ion-icon>
                </a>
            </div>
        </span>
        <!--main highlight-->
        <div  class="main-highlight">
            <ion-icon name="location-outline"></ion-icon> Delivering to: Street, Town, State
        </div>
        <div id="right-area">
            <div class="sub-total">
                <h2 class="main-title">0 Items</h2>
                <br />
                <span style="float:left">Subtotal</span>
                <span style="float:right" id="subtotal">$0</span>
                <br />
                <hr class="divider">
                <span style="float:left">Delivery Fee</span>
                <span style="float:right">$8.00</span>
                <br />
                <hr class="divider">
                <button class="checkout-button" id="checkout">Checkout - $0.00</button>
            </div>
        </div>
        <!--main menus / order-->
        <div class="item-head">
            <h1 id="myCart">My Cart</h1>
            <br /><br />
            <button class="simple-button" onClick="window.location.href = 'index.html'">Back to menu</button>
            <br />
        </div>
        <span id="item-area" >
        </span>
        <script type="text/javascript">
            function updateSubTotal(){
                const uCart = JSON.parse(localStorage.getItem('cart'));
                let subTotal = 0;
                for (let i = 0; i < uCart.length; i++) {
                    subTotal += uCart[i].price;
                }
                document.getElementById("subtotal").innerHTML = "$" + subTotal.toFixed(2);
                document.getElementById("checkout").innerHTML = "Checkout - $" + (subTotal+8).toFixed(2);
                document.querySelector(".main-title").innerHTML = uCart.length+" Items";
            }
            function updateCart(){
                const cart = JSON.parse(localStorage.getItem('cart'));
                let itemArea = document.getElementById("item-area");
                itemArea.innerHTML = "";
                for (let i = 0; i < cart.length; i++) {
                    itemArea.innerHTML += `<div class="item" id="item` + (i + 1) + `">
                    <span class="item-img"><img class = "detail-img" src="` + cart[i].image + `"></span>
                    <span class="item-name">` + cart[i].product + `</span>
                    <span class="item-name">` + cart[i].size + `</span>
                    <span class="item-quantity" >
                    <button onClick="subAmount(` + (i + 1) + `)">-</button>
                    <span id="amountEle` + (i + 1) + `">` + cart[i].quantity + `</span>
                    <button onClick="addAmount(` + (i + 1) + `)">+</button></span>
                    <span class="item-price" id="itemPrice` + (i + 1) + `">` + cart[i].price.toFixed(2) + `</span>
                    <span class="item-remove"><button onClick="removeItem(` + (i + 1) + `)">Remove</button></span>
                    </div>`;
                }
            }
            document.onload = updateCart();
            document.onload = updateSubTotal();
        </script>
    </div>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="app.js"></script>
</body>
</html>
